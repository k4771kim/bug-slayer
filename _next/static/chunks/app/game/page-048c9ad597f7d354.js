(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(4654).createAsyncLocalStorage)()},762:(e,t,r)=>{"use strict";e.exports=r(8676)},943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(508)},1934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(8903)._(r(2390));function s(e,t){var r;let s={};"function"==typeof e&&(s.loader=e);let o={...s,...t};return(0,n.default)({...o,modules:null==(r=o.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=r(9867),s=r(8523),o=r(7981);function a(e){return{default:e&&"default"in e?e.default:e}}r(9104);let u={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},i=function(e){let t={...u,...e},r=(0,s.lazy)(()=>t.loader().then(a)),i=t.loading;function l(e){let a=i?(0,n.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,u=!t.ssr||!!t.loading,l=u?s.Suspense:s.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(l,{...u?{fallback:a}:{},children:c})}return l.displayName="LoadableComponent",l}},2623:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(9867),s=r(8523),o=r(7604),a=r(1934),u=r.n(a),i=r(6743);class l extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){if(this.state.hasError){var e;return(0,n.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-[#1e1e1e] text-white gap-4 p-8",children:[(0,n.jsx)("div",{className:"text-red-400 text-2xl font-bold",children:"Game Engine Error"}),(0,n.jsx)("p",{className:"text-gray-400 text-center max-w-md",children:"The game engine encountered an unexpected error. This might be due to a browser compatibility issue or a temporary glitch."}),(0,n.jsx)("pre",{className:"text-xs text-gray-500 max-w-md overflow-auto bg-[#252526] p-3 rounded",children:null==(e=this.state.error)?void 0:e.message}),(0,n.jsx)("button",{onClick:this.handleRetry,className:"px-6 py-2 bg-[#007acc] hover:bg-[#0098ff] rounded transition-colors font-medium",children:"Retry"})]})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}}let c=u()(()=>Promise.all([r.e(161),r.e(634)]).then(r.bind(r,6634)).then(e=>({default:e.PhaserGame})),{loadableGenerated:{webpack:()=>[6634]},ssr:!1,loading:()=>(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-gray-400",children:"Loading game engine..."})})});function d(){let e=(0,o.useRouter)(),{user:t,checkAuth:r,isLoading:a}=(0,i.n)();return((0,s.useEffect)(()=>{r()},[r]),(0,s.useEffect)(()=>{a||t||e.push("/login")},[t,a,e]),(0,s.useEffect)(()=>(document.body.classList.add("game-active"),()=>document.body.classList.remove("game-active")),[]),a)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#1e1e1e]",children:(0,n.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):t?(0,n.jsxs)("div",{className:"h-[100dvh] bg-[#1e1e1e] text-white flex flex-col overflow-hidden",children:[(0,n.jsxs)("header",{className:"hidden md:flex bg-[#252526] border-b border-[#3c3c3c] p-2 px-4 items-center justify-between shrink-0",children:[(0,n.jsx)("h1",{className:"text-lg font-bold",children:"Bug Slayer"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-gray-400 text-sm",children:t.displayName}),(0,n.jsx)("button",{onClick:()=>{i.n.getState().logout(),e.push("/")},className:"px-3 py-1 text-sm bg-red-600 hover:bg-red-700 rounded transition-colors",children:"Logout"})]})]}),(0,n.jsx)("main",{className:"flex-1 flex items-center justify-center min-h-0",children:(0,n.jsx)(l,{children:(0,n.jsx)(c,{className:"w-full h-full max-w-[800px] max-h-[600px] md:p-4"})})})]}):null}},3651:(e,t,r)=>{"use strict";var n=r(8523),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,a=n.useEffect,u=n.useLayoutEffect,i=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),s=n[0].inst,c=n[1];return u(function(){s.value=r,s.getSnapshot=t,l(s)&&c({inst:s})},[e,r,t]),a(function(){return l(s)&&c({inst:s}),e(function(){l(s)&&c({inst:s})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},4620:(e,t,r)=>{"use strict";e.exports=r(3651)},4654:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return a},createAsyncLocalStorage:function(){return o},createSnapshot:function(){return u}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let s="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function o(){return s?new s:new n}function a(e){return s?s.bind(e):n.bind(e)}function u(){return s?s.snapshot():function(e,...t){return e(...t)}}},6743:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});var n=r(7961);class s{setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={"Content-Type":"application/json"};t.headers&&Object.assign(r,t.headers),this.token&&(r.Authorization="Bearer ".concat(this.token));try{let n=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:r}),s=await n.json();if(!n.ok)return{error:s.error||{code:"UNKNOWN_ERROR",message:"An unknown error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e){this.token=null,this.baseUrl=e,this.token=localStorage.getItem("auth_token")}}let o=new s("http://100.91.39.21:3001"),a=(0,n.vt)(e=>({user:null,isLoading:!1,error:null,login:async(t,r)=>{e({isLoading:!0,error:null});let n=await o.post("/api/auth/login",{email:t,password:r});return n.error?(e({isLoading:!1,error:n.error.message}),!1):!!n.data&&(o.setToken(n.data.token),e({user:n.data.user,isLoading:!1,error:null}),!0)},register:async(t,r,n)=>{e({isLoading:!0,error:null});let s=await o.post("/api/auth/register",{email:t,password:r,displayName:n});return s.error?(e({isLoading:!1,error:s.error.message}),!1):!!s.data&&(o.setToken(s.data.token),e({user:s.data.user,isLoading:!1,error:null}),!0)},logout:()=>{o.setToken(null),e({user:null,error:null})},checkAuth:async()=>{if(!o.getToken())return void e({user:null});e({isLoading:!0});let t=await o.get("/api/auth/me");if(t.error){o.setToken(null),e({user:null,isLoading:!1});return}t.data&&e({user:t.data.user,isLoading:!1})}}))},7604:(e,t,r)=>{"use strict";var n=r(8980);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},7961:(e,t,r)=>{"use strict";r.d(t,{vt:()=>c});let n=e=>{let t,r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,o={setState:n,getState:s,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},a=t=e(n,s,o);return o};var s=r(8523),o=r(762);let{useDebugValue:a}=s,{useSyncExternalStoreWithSelector:u}=o,i=!1,l=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?(e=>e?n(e):n)(e):e,r=(e,r)=>(function(e,t=e=>e,r){r&&!i&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),i=!0);let n=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return a(n),n})(t,e,r);return Object.assign(r,t),r},c=e=>e?l(e):l},7981:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(5025)},8676:(e,t,r)=>{"use strict";var n=r(8523),s=r(4620),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,u=n.useRef,i=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var d=u(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=a(e,(d=l(function(){function e(e){if(!i){if(i=!0,a=e,e=n(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return u=t}return u=e}if(t=u,o(a,e))return t;var r=n(e);return void 0!==s&&s(t,r)?(a=e,t):(a=e,u=r)}var a,u,i=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,s]))[0],d[1]);return i(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},9104:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(9867),r(6410),r(943),r(3046)},9722:(e,t,r)=>{Promise.resolve().then(r.bind(r,2623))}},e=>{e.O(0,[587,851,358],()=>e(e.s=9722)),_N_E=e.O()}]);